"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,l,c,i){return new(c=c||Promise)(function(r,t){function n(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(n,o)}a((i=i.apply(e,l||[])).next())})},__generator=this&&this.__generator||function(r,n){var o,a,l,c={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(l=2&t[0]?a.return:t[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,t[1])).done)return l;switch(a=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(l=0<(l=c.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){c.label=t[1];break}if(6===t[0]&&c.label<l[1]){c.label=l[1],l=t;break}if(l&&c.label<l[2]){c.label=l[2],c.ops.push(t);break}l[2]&&c.ops.pop(),c.trys.pop();continue}t=n.call(r,c)}catch(e){t=[6,e],a=0}finally{o=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};exports.__esModule=!0;var react_1=require("react"),button_1=require("@/components/ui/button"),lucide_react_1=require("lucide-react"),dialog_1=require("@/components/ui/dialog"),input_1=require("@/components/ui/input"),todo_actions_1=require("@/actions/todo.actions"),form_1=require("@/components/ui/form"),textarea_1=require("@/components/ui/textarea"),schema_1=require("@/schema"),react_hook_form_1=require("react-hook-form"),zod_1=require("@hookform/resolvers/zod"),checkbox_1=require("./ui/checkbox"),Spinner_1=require("./Spinner"),EditTodoForm=function(e){var r=e.todo,t=react_1.useState(!1),n=t[0],o=t[1],a=react_1.useState(!1),l=a[0],c=a[1],i={title:r.title,body:r.body,completed:r.completed},u=react_hook_form_1.useForm({resolver:zod_1.zodResolver(schema_1.todoFormSchema),defaultValues:i,mode:"onChange"});return React.createElement(dialog_1.Dialog,{open:l,onOpenChange:c},React.createElement(dialog_1.DialogTrigger,{asChild:!0},React.createElement(button_1.Button,{variant:"outline"},React.createElement(lucide_react_1.Pen,{size:16}))),React.createElement(dialog_1.DialogContent,{className:"sm:max-w-[425px]"},React.createElement(dialog_1.DialogHeader,null,React.createElement(dialog_1.DialogTitle,null,"Edit profile"),React.createElement(dialog_1.DialogDescription,null,"Make changes to your profile here. Click save when you're done.")),React.createElement("div",{className:"grid gap-4 py-4"},React.createElement(form_1.Form,__assign({},u),React.createElement("form",{onSubmit:u.handleSubmit(function(t){return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return o(!0),[4,todo_actions_1.updateTodoAction({id:r.id,title:t.title,body:t.body,completed:t.completed})];case 1:return e.sent(),o(!1),c(!1),[2]}})})}),className:"space-y-8"},React.createElement(form_1.FormField,{control:u.control,name:"title",render:function(e){var t=e.field;return React.createElement(form_1.FormItem,null,React.createElement(form_1.FormLabel,null,"title"),React.createElement(form_1.FormControl,null,React.createElement(input_1.Input,__assign({placeholder:"title name"},t))),React.createElement(form_1.FormMessage,null))}}),React.createElement(form_1.FormField,{control:u.control,name:"body",render:function(e){var t=e.field;return React.createElement(form_1.FormItem,null,React.createElement(form_1.FormLabel,null,"description"),React.createElement(form_1.FormControl,null,React.createElement(textarea_1.Textarea,__assign({placeholder:"description short",className:"resize-none"},t))),React.createElement(form_1.FormDescription,null,"You can ",React.createElement("span",null,"@mention")," other users and organizations to link to them."),React.createElement(form_1.FormMessage,null))}}),React.createElement(form_1.FormField,{control:u.control,name:"completed",render:function(e){var t=e.field;return React.createElement(form_1.FormItem,null,React.createElement(form_1.FormControl,null,React.createElement(checkbox_1.Checkbox,{checked:t.value,onCheckedChange:t.onChange})),React.createElement(form_1.FormLabel,null,"Completed"),React.createElement(form_1.FormMessage,null))}}),React.createElement(button_1.Button,{type:"submit",disabled:n},n?React.createElement(React.Fragment,null,React.createElement(Spinner_1.default,null),"saving"):"Save"))))))};exports.default=EditTodoForm;